# Механика генерации травы

+ Коротко о том, как работает трава (на что влияют основные параметры INI-файлов) и почему не получится сесть сразу на несколько стульев.

------

1) Полностью "исправить" дальность прорисовки травы не удастся из-за ограничений движка. Игра по умолчанию грузит траву только в двух ячейках вокруг тебя, дальше - только мутные текстуры ЛОДов. Увеличить максимальную дальность травы выше некоего предела ни из настроек, ни через ini без последствий нельзя.

2) По идее, этот параметр контролируется строкой

    > iGrassCellRadius=2

    в Skyrim.ini. Он должен быть равен параметру uGridsToLoad (радиус загрузки ячеек в полном качестве), деленному на 2 и округленному вниз. Дефолтный uGridsToLoad равен 5, повышать его можно только с шагом 2 (7, 9, 11 и т.д.), соответственно, iGrassCellRadius будет 3, 4, 5... Но играться с этим параметром - очень нездоровая идея, которая в разы повышает лаги и нестабильность, которую просто так назад не откатить. Поэтому чаще всего проблему с травой решают так:

    + Задирают дальность прорисовки на максимум и устанавливают градиент "выцветания" травы вдалеке, чтобы её появление не так бросалось в глаза. Можно попробовать следующие параметры:

    **Skyrim.ini**

        ```[Grass]
        bAllowCreateGrass=1
        bAllowLoadGrass=0
        fGrassMaxStartFadeDistance=18000.0000
        fGrassMinStartFadeDistance=0.0000
        bDrawShaderGrass=1
        fGrassFadeRange=13400
        fGrassWindMagnitudeMax=125
        fGrassWindMagnitudeMin=5
        iGrassCellRadius=2
        iMaxGrassTypesPerTexure=15
        iMinGrassSize=XX

    Последний параметр влияет на густоту травы, для разных реплейсеров и оверхолов свой оптимум, надо экспериментировать. Чем выше значение - тем менее густой травон.

    **SkyrimPrefs.ini**

        ```[Grass]
        fGrassStartFadeDistance=2360.0000
        fGrassMaxStartFadeDistance=18000.0000
        fGrassMinStartFadeDistance=0.0000

    Если результат не понравится, можно поиграть с параметром fGrassFadeRange (дальность прорисовки травы, можно попробовать значения до 18000) и fGrassStartFadeDistance (начало градиента "выцветания" травы, можно тоже повышать и смотреть на результат).

    + Текстуры травы, земли и ЛОДов, а также текстура шума, накладываемого на ЛОДы для имитации мелких деталей, подгоняются друг к другу так, чтобы граница, где исчезает трава, не бросалась в глаза. Хорошо, если ты скачал какой-то оверхол типа Cathedral или Velanimus, где всё подобрано заранее. Хуже, если собираешь всё сам, тогда придется помучаться с ручным подбором текстур, генерацией текстур ЛОДов и т.д.

    + Ещё способ - накатить дымку или туман, закрывающий детали на расстоянии. Можно либо через ENB, либо модами типа "Volumetric Mists" или "Cresty's distant mists".
