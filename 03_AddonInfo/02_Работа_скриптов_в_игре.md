# Работа скриптов в игре

> Иногда ты можешь найти мод, про который мало информации о его подводных камнях. Насколько сильно он нагружает игру своими скриптами (если они есть)? Здесь мы разбираем Script Latency.

**Для начала несколько ссылок, полезных для понимания темы:**
+ [A few script execution speed PSAs](https://www.reddit.com/r/skyrimmods/comments/4omjly/a_few_script_execution_speed_psas/)
+ [Script Lag: How to tell if you have it and how to fix it](https://forums.nexusmods.com/index.php?/topic/1596198-script-lag-how-to-tell-if-you-have-it-and-how-to-fix-it/)

------

**Паста от мудрых анонов:**

Задержка выполнения скриптового действия должна быть 50-100 миллисекунд. В некоторых ситуациях задержка может подскакивать, и твоя задача подобные ситуации избегать. Что за ситуации? Например, обработка частых событий (яркий пример - OnHit(), если ты бьёшь цель мечом с двумя зачарованиями, то OnHit() запустится аж 3 раза - 1 на физический урон и по 1 на каждое зачарование), что может вызвать скачок задержки. Жрущей является функция Game.GetPlayer(), время её выполнения - около 20 миллисекунд. Ещё одним источником пиздеца может стать OnUpdate() - если добрый кодер поставит аргумент 0.01 или типа того, то за секунду Папирус должен будет обработать 100 таких вызовов. А теперь смотрим [описание OnUpdate](http://www.creationkit.com/index.php?title=OnUpdate_(Papyrus)):

> Be careful with the use of this event. Because it uses real-time, it can start piling up on itself if the OnUpdate doesn't finish before the time is up. To avoid this, try using a longer time at registration, or do a 'single update chain'.

Это значит, что при малом значении аргумента OnUpdate() намотает на вал и себя, и всех остальных.

Чтобы разбираться во всём этом, нужно знать скриптинг. Как освоить скриптинг? Enai Siaion ответил так: читать [сайт CK](http://www.creationkit.com/index.php?title=Category:Papyrus) и использовать здравый смысл. Да-да, этот момент настолько прост и понятен, что любой справится, было бы желание. Надо найти хороший туториал по скриптингу, но есть нюансы. Тот же www.CreationKit.com имеет неточности. Есть и другие туториалы, например [от DarkFox'а](https://www.darkfox127.co.uk). В /r/skyrimmods тоже есть ссылка (под заголовком "Making Mods"). Проблема в том, что работающий скрипт и оптимизированный скрипт - вещи разные, и для оптимизации нужно понимать, что и как работает, потому нужно будет самому экспериментировать с функциями. Если нет времени/желания, то можно положиться на знания более опытных скриптеров - гения Папируса они из тебя, конечно, не сделают, но ответить на вопрос-другой могут.

------

|[*Назад к оглавлению*](../01_Оглавление.md)|
|:---:|
